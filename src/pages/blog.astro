---
import { storyblokEditable, useStoryblokApi } from '@storyblok/astro'
import BlogCard from '../components/blog/BlogCard.astro'

import BaseLayout from "../layouts/BaseLayout.astro";
 
const { blok} = Astro.props
 
const storyblokApi = useStoryblokApi()
const { data } = await storyblokApi.get(`cdn/stories/`, {
  version: 'draft', // or 'published'
  starts_with: "blog/",
  content_type: "blogPost",
  is_startpage: 0,
})
 
const articles = data.stories
const title="Posts"

console.log(articles);

---

<BaseLayout title={title}>
<section class="mx-6 my-12" {...storyblokEditable(blok)}>
  <h2 class="text-6xl text-[#50b0ae] font-bold text-center mb-12">
    {blok}
    Hellew
  </h2>
  <ul class="grid grid-cols-1 gap-6 md:grid-cols-1">
    {
      articles?.length &&
        articles.map((article) => {
          article.content.slug = article.slug
          return (
            <li>
              <BlogCard article={article.content} tags={article.tag_list} link={article.full_slug}/>
            </li>
          )
        })
    }
  </ul>
</section>
</BaseLayout>